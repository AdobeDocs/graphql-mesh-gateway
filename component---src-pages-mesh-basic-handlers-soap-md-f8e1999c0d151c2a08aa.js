"use strict";(self.webpackChunkgraphql_mesh_gateway=self.webpackChunkgraphql_mesh_gateway||[]).push([[1836],{86147:function(e,n,a){a.r(n),a.d(n,{_frontmatter:function(){return d},default:function(){return c}});var r=a(87462),t=a(45987),i=(a(35776),a(3905)),o=a(91515);const l=["components"],d={},m=(s="InlineAlert",function(e){return console.warn("Component "+s+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",e)});var s;const p={_frontmatter:d},u=o.Z;function c(e){let{components:n}=e,a=(0,t.Z)(e,l);return(0,i.mdx)(u,(0,r.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"soap-handlers"},(0,i.mdx)("inlineCode",{parentName:"h1"},"soap")," handlers"),(0,i.mdx)(m,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"The SOAP handler is experimental and should not be used in production deployments."),(0,i.mdx)("p",null,"The SOAP handler allows you to consume ",(0,i.mdx)("a",{parentName:"p",href:"https://soapui.org"},"SOAP")," ",(0,i.mdx)("inlineCode",{parentName:"p"},"WSDL")," files and generate a remote executable schema for those services."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "meshConfig": {\n    "sources": [\n      {\n        "name": "SoapSource",\n        "handler": {\n          "soap": {\n            "source": "http://<Commerce Host>/soap?wsdl&services=customerCustomerRepositoryV1",\n            "wsdl": "http://<Commerce Host>/soap?wsdl&services=customerCustomerRepositoryV1",\n            "operationHeaders": {\n              "x-operation-header-key": "sample-x-operation-header-value"\n            },\n            "schemaHeaders": {\n              "x-schema-header-key": "sample-x-schema-header-value"\n            }\n          }\n        }\n      }\n    ]\n  }\n}\n')),(0,i.mdx)(m,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"If your source handler's schema is modified, you must ",(0,i.mdx)("a",{parentName:"p",href:"../../basic/create-mesh.md#update-an-existing-mesh"},"update your mesh")," to allow API Mesh to cache any changes."),(0,i.mdx)("p",null,"Add SOAP handlers to your mesh:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "meshConfig": {\n    "sources": [\n      {\n        "name": "SoapSource",\n        "handler": {\n          "soap": {\n            "source": "http://<Commerce Host>/soap?wsdl&services=customerCustomerRepositoryV1",\n            "wsdl": "http://<Commerce Host>/soap?wsdl&services=customerCustomerRepositoryV1",\n            "operationHeaders": {\n              "x-operation-header-key": "sample-x-operation-header-value"\n            },\n            "schemaHeaders": {\n              "x-schema-header-key": "sample-x-schema-header-value"\n            }\n          }\n        }\n      }\n    ]\n  }\n}\n')),(0,i.mdx)("h2",{id:"soap-limitations"},"SOAP limitations"),(0,i.mdx)("p",null,"The experimental SOAP handler has the following limitations:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"A ",(0,i.mdx)("inlineCode",{parentName:"li"},"source")," field and a ",(0,i.mdx)("inlineCode",{parentName:"li"},"wsdl")," field (with identical values) are required",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"This redundancy is a temporary limitation and will be addressed in a future release."))),(0,i.mdx)("li",{parentName:"ul"},"If you do not provide an expected argument, you will receive an ",(0,i.mdx)("inlineCode",{parentName:"li"},"undefined")," error.",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"This error will be clarified in a future release."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"context.headers")," are not available inside ",(0,i.mdx)("inlineCode",{parentName:"li"},"operationHeaders")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"mutations")," must be used when querying")),(0,i.mdx)("h2",{id:"querying"},"Querying"),(0,i.mdx)("p",null,"When querying a SOAP source inside a mesh, use a ",(0,i.mdx)("inlineCode",{parentName:"p"},"mutation")," instead of a ",(0,i.mdx)("inlineCode",{parentName:"p"},"query"),", as illustrated in the following example:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-graphql"},'mutation {\n  catalogProductRepositoryV1Get(\n    sku: "product_dynamic_249"\n    editMode: true\n    storeId: 1\n    forceReload: true\n  ),\n\n  catalogCategoryListV1GetList(searchCriteria:"category")\n}\n')),(0,i.mdx)("h2",{id:"config-api-reference"},"Config API reference"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"source"),"(type: ",(0,i.mdx)("inlineCode",{parentName:"li"},"String"),", required) - URL to your WSDL, must be identical to ",(0,i.mdx)("inlineCode",{parentName:"li"},"wsdl")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"wsdl")," (type: ",(0,i.mdx)("inlineCode",{parentName:"li"},"String"),", required) - URL to your WSDL, must be identical to the ",(0,i.mdx)("inlineCode",{parentName:"li"},"source")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"schemaHeaders")," (type: ",(0,i.mdx)("inlineCode",{parentName:"li"},"Any"),") - JSON object for adding headers to API calls for runtime schema introspection",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"You can also provide a ",(0,i.mdx)("inlineCode",{parentName:"li"},".js")," or ",(0,i.mdx)("inlineCode",{parentName:"li"},".ts")," file path that exports ",(0,i.mdx)("inlineCode",{parentName:"li"},"schemaHeaders")," as an object."))),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"operationHeaders")," (type: ",(0,i.mdx)("inlineCode",{parentName:"li"},"JSON"),") - JSON object for adding headers to API calls for runtime operation execution")))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-mesh-basic-handlers-soap-md-f8e1999c0d151c2a08aa.js.map