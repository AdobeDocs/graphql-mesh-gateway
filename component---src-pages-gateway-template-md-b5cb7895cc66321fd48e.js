"use strict";(self.webpackChunkgraphql_mesh_gateway=self.webpackChunkgraphql_mesh_gateway||[]).push([[2282],{18948:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return m},default:function(){return u}});var a=n(87462),o=n(45987),r=(n(35776),n(3905)),i=n(91515);const d=["components"],m={},l=(p="InlineAlert",function(e){return console.warn("Component "+p+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",e)});var p;const s={_frontmatter:m},c=i.Z;function u(e){let{components:t}=e,n=(0,o.Z)(e,d);return(0,r.mdx)(c,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"create-a-mesh-from-a-template"},"Create a mesh from a template"),(0,r.mdx)("p",null,"API Mesh for Adobe Developer App Builder provides a straightforward way to ",(0,r.mdx)("a",{parentName:"p",href:"create-mesh.md"},"create a mesh"),". Alternatively, you can create a mesh from a template, which avoids most of the installation and setup steps required for a traditionally created mesh."),(0,r.mdx)("h2",{id:"clone-the-repository"},"Clone the repository"),(0,r.mdx)("p",null,"From the API Mesh template repository page, click the ",(0,r.mdx)("strong",{parentName:"p"},"Use this template")," button to create a new repository based on the template."),(0,r.mdx)("h2",{id:"create-a-project-and-workspace"},"Create a project and workspace"),(0,r.mdx)("p",null,"In the Adobe Developer Console, create a project and workspace and add the API Mesh API to it. ",(0,r.mdx)("a",{parentName:"p",href:"./work-with-mesh.md#projects-and-workspaces"},"Create your project and workspace"),"."),(0,r.mdx)("h2",{id:"configure-secrets"},"Configure secrets"),(0,r.mdx)("p",null,"In the Developer Console, click the ",(0,r.mdx)("strong",{parentName:"p"},"Download")," button in the top-right corner of the Project Overview page."),(0,r.mdx)("p",null,"In your cloned repository, ",(0,r.mdx)("a",{parentName:"p",href:"https://docs.github.com/en/actions/learn-github-actions/variables#creating-configuration-variables-for-a-repository"},"add the following configuration variables")," from the JSON file."),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Variable name in GitHub"),(0,r.mdx)("th",{parentName:"tr",align:null},"Name defined in downloaded JSON"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"CLIENTID"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"client_id"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"CLIENTSECRET"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"client_secret"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"TECHNICALACCOUNTID"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"technical_account_email"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"TECHNICALACCOUNTEMAIL"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"technical_account_id"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"IMSORGID"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"ims_org_id"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"ORGID"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"project")," > ",(0,r.mdx)("inlineCode",{parentName:"td"},"org")," > ",(0,r.mdx)("inlineCode",{parentName:"td"},"id"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"PROJECTID"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"project")," > ",(0,r.mdx)("inlineCode",{parentName:"td"},"id"))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"WORKSPACEID"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"project")," > ",(0,r.mdx)("inlineCode",{parentName:"td"},"workspace")," > ",(0,r.mdx)("inlineCode",{parentName:"td"},"id"))))),(0,r.mdx)("h2",{id:"test-your-mesh-in-the-github-codespace"},"Test your mesh in the GitHub Codespace"),(0,r.mdx)(l,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"When working with codespaces, make sure to follow Github's ",(0,r.mdx)("a",{parentName:"p",href:"https://docs.github.com/en/codespaces/reference/security-in-github-codespaces"},"security best practices"),"."),(0,r.mdx)("p",null,"After configuring your variables, click the ",(0,r.mdx)("strong",{parentName:"p"},"Code")," dropdown in your repository and select the ",(0,r.mdx)("strong",{parentName:"p"},"Codespaces")," tab. Click ",(0,r.mdx)("strong",{parentName:"p"},"Create Codespace"),". The codespace will automatically set up the environment for you."),(0,r.mdx)("p",null,"Once your codespace loads, and the ",(0,r.mdx)("inlineCode",{parentName:"p"},"yarn start")," command completes, click the ",(0,r.mdx)("strong",{parentName:"p"},"Ports")," tab in the bottom panel. Since portforwarding is automatically enabled, you can query the mesh over the internet. Click the link in the ",(0,r.mdx)("strong",{parentName:"p"},"Forwarded Address")," column. This page should give you a ",(0,r.mdx)("inlineCode",{parentName:"p"},"404")," error. You need to add ",(0,r.mdx)("inlineCode",{parentName:"p"},"/graphql")," to the URL to access the GraphQL playground. Your link should look like the following:"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"https://name-for-site-123456abc-5000.app.github.dev/graphql")),(0,r.mdx)(l,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"Do not use this URL for production purposes. Instead, use the endpoint provided when [publishing](#modify-and-publish-your-mesh).",(0,r.mdx)("p",null,"This URL is accessible over the internet based on the permissions of your repository and whether the server is running or not. For example, if your repository is private, users will need to log in to access the URL. If your repository is public, users can access the URL without logging in.")),(0,r.mdx)("p",null,"Now test the following simple query by adding it to the query window and clicking the ",(0,r.mdx)("strong",{parentName:"p"},"Play")," (Execute Query) button:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-graphql"},"{\n  storeConfig {\n    store_code\n  }\n}\n")),(0,r.mdx)("p",null,"You should receive a response from the Adobe Commerce API configured in your ",(0,r.mdx)("inlineCode",{parentName:"p"},".env")," file (by default this is ",(0,r.mdx)("a",{parentName:"p",href:"https://venia.magento.com"},"Venia"),", Commerce's reference storefront):"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "storeConfig": {\n      "store_code": "default"\n    }\n  },\n  "extensions": {}\n}\n')),(0,r.mdx)("h2",{id:"modify-and-publish-your-mesh"},"Modify and publish your mesh"),(0,r.mdx)("p",null,"Either modify your ",(0,r.mdx)("inlineCode",{parentName:"p"},"mesh.json")," file or the ",(0,r.mdx)("inlineCode",{parentName:"p"},".env")," file to add or replace your Commerce source. Alternatively, you can replace your mesh configuration file with a mesh from the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/adobe/adobe-commerce-samples/tree/main/api-mesh"},"code samples repository"),"."),(0,r.mdx)("p",null,"Then use the ",(0,r.mdx)("strong",{parentName:"p"},"Source Control")," tab in your Codespace to commit your changes. Once you commit your changes, the GitHub Actions will automatically update the deployed mesh."),(0,r.mdx)("p",null,"After you publish your mesh, you can access it using the URL provided listed in the ",(0,r.mdx)("strong",{parentName:"p"},"Describe")," section of the ",(0,r.mdx)("strong",{parentName:"p"},"Deploy Mesh")," step in the GitHub Actions output."),(0,r.mdx)("h2",{id:"files-in-the-template-repository"},"Files in the template repository"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"mesh.json")," - The mesh configuration file, which contains a sample mesh with a single source."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},".env")," - The environment file that contains variables for the mesh configuration file."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"package.json")," - The dependencies and scripts to test and deploy your mesh."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},".vscode/launch.json")," - A VS Code configuration to allow debugging in VS Code or in GitHub Codespaces."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},".devcontainer/devcontainer.json")," - Codespace's configuration for the development. This configuration helps set up packages and build the mesh automatically. It also configures port-forwarding, so you can use any GraphQL interface to interact with the mesh."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},".github/workflows/deployMesh.yml")," - A GitHub workflow to automatically publish the mesh config whenever you commit a change to the ",(0,r.mdx)("inlineCode",{parentName:"li"},"main")," branch.")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-gateway-template-md-b5cb7895cc66321fd48e.js.map