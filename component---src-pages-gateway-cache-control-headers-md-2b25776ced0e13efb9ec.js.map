{"version":3,"file":"component---src-pages-gateway-cache-control-headers-md-2b25776ced0e13efb9ec.js","mappings":"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","sources":["webpack://graphql-mesh-gateway/./src/pages/gateway/cache-control-headers.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/graphql-mesh-gateway/graphql-mesh-gateway/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"edge-caching\"\n    }}>{`Edge caching`}</h1>\n    <p>{`API Mesh for Adobe Developer App Builder supports edge caching if you provide your own content delivery network (CDN), such as Fastly. Edge caching helps improve website load times and reduces consumption costs associated with bandwidth.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`When using a CDN, you must invalidate the cache after modifying a mesh configuration or you will receive stale information.`}</p>\n    <h2 {...{\n      \"id\": \"cache-control-headers\"\n    }}>{`Cache-control headers`}</h2>\n    <p>{`A CDN's cache-control headers determine how queried information is cached.`}</p>\n    <p>{`When a browser or a GET request accesses a URL, the site's response headers typically include a `}<inlineCode parentName=\"p\">{`cache-control`}</inlineCode>{` header, which determines how long the site will allow its data to be cached. For example, a website could have the following response header:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-html\"\n      }}>{`cache-control: max-age=0\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`max-age=0`}</inlineCode>{` cache-control directive means that this site wants to serve `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching#fresh_and_stale_based_on_age\"\n      }}>{`fresh`}</a>{` data until `}<inlineCode parentName=\"p\">{`0`}</inlineCode>{` seconds after the response is generated, which basically means it never wants to cache data. This could also be achieved with a `}<inlineCode parentName=\"p\">{`no-store`}</inlineCode>{` directive.`}</p>\n    <p>{`For more information on specific cache-control directives and how they can be used, see the `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control\"\n      }}>{`Mozilla Developer Network's cache control guide`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"using-cache-control-headers-with-api-mesh\"\n    }}>{`Using cache-control headers with API Mesh`}</h2>\n    <p>{`API mesh users can add cache-control headers to `}<a parentName=\"p\" {...{\n        \"href\": \"#as-request-headers\"\n      }}>{`request headers`}</a>{` or to a `}<a parentName=\"p\" {...{\n        \"href\": \"#in-the-mesh-configuration-file\"\n      }}>{`mesh configuration file`}</a>{`.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`Currently, query-level caching is not supported.`}</p>\n    <h3 {...{\n      \"id\": \"as-request-headers\"\n    }}>{`As request headers`}</h3>\n    <p>{`Use a mesh configuration similar to the example below to `}<a parentName=\"p\" {...{\n        \"href\": \"headers.md#return-forwarded-headers\"\n      }}>{`return forwarded headers`}</a>{`.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`You can also use a header value of `}<inlineCode parentName=\"p\">{`x-include-metadata=true`}</inlineCode>{` to return all headers.`}</p>\n    <p>{`When the response includes cache-control values, only the `}<a parentName=\"p\" {...{\n        \"href\": \"#how-conflicting-header-values-are-resolved\"\n      }}>{`most restrictive values`}</a>{` are returned.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"meshConfig\": {\n    \"responseConfig\": {\n        \"headers\": {\n      \"Cache-Control\": \"max-age=50,min-fresh=6,stale-if-error=20,public,must-revalidate\"\n        }\n    },\n    \"sources\": [\n      {\n        \"name\": \"venia\",\n        \"handler\": {\n          \"graphql\": {\n            \"endpoint\": \"https://venia.magento.com/graphql\"\n          }\n        }\n      }\n    ]\n  }\n}\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`POST requests are not supported, and GET requests are limited to 2,048 characters.`}</p>\n    <h4 {...{\n      \"id\": \"how-conflicting-header-values-are-resolved\"\n    }}>{`How conflicting header values are resolved`}</h4>\n    <p>{`When cache-control header values from multiple sources conflict, API Mesh selects the lowest or most restrictive value. The following section explains which values are returned when `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control\"\n      }}>{`cache-control directives`}</a>{` conflict.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`no-store`}</inlineCode>{` directive supersedes all other directives. If your source's cache-control headers contain this directive, then the mesh does not return other headers.`}</p>\n    <p>{`If your source's cache-control headers contain conflicting values for the following directives, the mesh selects the lowest value:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`min-fresh`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`max-age`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`max-stale`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`s-maxage`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`stale-if-error`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`stale-while-revalidate`}</inlineCode></p>\n      </li>\n    </ul>\n    <p>{`If your source's cache-control headers contain any of the following directives, the mesh adds the directive to the `}<inlineCode parentName=\"p\">{`cache-control`}</inlineCode>{` response.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`public`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`private`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`immutable`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`no-cache`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`no-transform`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`must-revalidate`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`proxy-revalidate`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`must-understand`}</inlineCode></p>\n      </li>\n    </ul>\n    <p><strong parentName=\"p\">{`Examples`}</strong></p>\n    <p>{`The following example scenarios indicate the resulting `}<inlineCode parentName=\"p\">{`Response header`}</inlineCode>{` from two conflicting sources:`}</p>\n    <p>{`Example 1`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Source 1 response headers`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`max-age=3600, stale-while-revalidate=60, stale-if-error=3600`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Source 2 response headers`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`max-age:600, stale-if-error=60`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Combined HTTP response headers`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`max-age=600, stale-while-revalidate=60, stale-if-error=60`}</li>\n        </ul>\n      </li>\n    </ul>\n    <p>{`Example 2`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Source 1 response headers`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`max-age=3600, stale-while-revalidate=60, stale-if-error=3600`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Source 2 response headers`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`no-store`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Combined HTTP response headers`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`no-store`}</li>\n        </ul>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"in-the-mesh-configuration-file\"\n    }}>{`In the mesh configuration file`}</h3>\n    <p>{`To set your own values for cache-control headers, add a `}<inlineCode parentName=\"p\">{`Cache-Control`}</inlineCode>{` key-value pair to the `}<inlineCode parentName=\"p\">{`responseConfig`}</inlineCode>{` object in your mesh configuration file.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`Cache-control header values in your mesh configuration file take precedence over other conflicting values for your sources and are always included in the response.`}</p>\n    <h4 {...{\n      \"id\": \"mesh-example\"\n    }}>{`Mesh Example`}</h4>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"meshConfig\": {\n    \"responseConfig\": {\n        \"headers\": {\n      \"Cache-Control\": \"max-age=50,min-fresh=6,stale-if-error=20,public,must-revalidate\"\n        }\n    },\n    \"sources\": [\n      {\n        \"name\": \"venia\",\n        \"handler\": {\n          \"graphql\": {\n            \"endpoint\": \"https://venia.magento.com/graphql\"\n          }\n        }\n      }\n    ]\n  }\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","variant","slots","parentName","isMDXComponent"],"sourceRoot":""}